<div class="w-100 np-4">
  <div class="w-100 row d-flex justify-content-between gx-0">
    <div class="col-md-6 col-lg-8 d-flex flex-column ">
      <div class="row d-flex flex-column flex-lg-row mt-lg-n4 flex-wrap flex-grow-1">
        {% for link in linklists[section.settings.footer].links %}
          {% if link.levels == 1 and forloop.index < 4 %}
            <div class="col-lg-3">
              <div class="mt-lg-4 mb-0 border-bottom dot-border-dark border-lg-none">
                <p class="d-flex d-lg-none mb-0 justify-content-between align-items-center nav-title npt-3 npb-3"
                  data-bs-toggle="collapse" 
                  href="#footer-{{ link.title | handleize }}" role="button" aria-expanded="false" aria-controls="footer-{{ link.title | handleize }}">
                  <span class="font-ndot55 fs-base">{{ link.title }}</span>
                  <span class="nav-chevron-down">{% render 'icon-chevron-down' %}</span>
                </p>
                <div class="d-none d-lg-block font-ndot55 fs-base npb-3">{{ link.title }}</div>
                <ul class="list-unstyled mb-0 collapse d-lg-block" id="footer-{{ link.title | handleize }}">
                  {% for sublink in link.links %}
                    <li class="{% if forloop.last %}npb-3 {% endif %}d-flex npy-1 py-lg-0">
                      <{% if sublink.title == '&nbsp;' %}div{% else %}a data-id="footer_nav"{% endif %} class="{% unless sublink.title == '&nbsp;' %}nlink-hover{% endunless %} text-dark break-word font-ndot55 fs-base"
                        {% if link.url contains 'https://' or link.url contains 'http://' %} target="_blank" rel="noopener"{% endif %}
                        href="{{ sublink.url }}">{{ sublink.title }}</{% if sublink.title == '&nbsp;' %}div{% else %}a{% endif %}>
                    </li>
                  {% endfor %}
                </ul>
              </div>
            </div>
          {% endif %}
        {% endfor %}
        <div class="col-lg-3 text-uppercase">
          <div class="mt-lg-4 mb-0 border-bottom dot-border-dark border-lg-none">
            <p class="d-flex d-lg-none mb-0 justify-content-between align-items-center nav-title npt-3 npb-3"
              data-bs-toggle="collapse" 
              href="#footer-social" role="button" aria-expanded="false" aria-controls="footer-social">
              <span class="font-ndot55 fs-base">{{ section.settings.social_title }}</span>
              <span class="nav-chevron-down">{% render 'icon-chevron-down' %}</span>
            </p>
            <div class="d-none d-lg-block font-ndot55 fs-base npb-3">{{ section.settings.social_title }}</div>
            <ul class="list-unstyled mb-0 collapse d-lg-block" id="footer-social">
              {%- assign social_icons = false -%}
              {%- if
                settings.social_twitter_link != blank
                or settings.social_facebook_link != blank
                or settings.social_pinterest_link != blank
                or settings.social_instagram_link != blank
                or settings.social_tumblr_link != blank
                or settings.social_snapchat_link != blank
                or settings.social_youtube_link != blank
                or settings.social_vimeo_link != blank
                or settings.social_tiktok_link != blank
                or settings.social_discord_link != blank
              -%}
                {%- assign social_icons = true -%}
              {%- endif -%}
              {%- assign socials = "Instagram YouTube Twitter Facebook Pinterest Tumblr Snapchat Vimeo Tiktok Discord" | split: ' ' -%}
              {%- if social_icons -%}
                {%- for social in socials -%}
                  {%- assign social_link = social | prepend: 'social_' | append: '_link' | downcase -%}
                  {%- if settings[social_link] != blank -%}
                  <li class="{% if forloop.last %}npb-3 {% endif %}d-flex npy-1 py-lg-0">
                    <a class="nlink-hover text-dark break-word font-ndot55 fs-base text-uppercase-real" target="_blank" rel="noopener"
                      data-id="footer_nav"
                      href="{{ settings[social_link] | escape }}">{{ social }}</a>
                  </li>
                  {%- endif -%}
                {%- endfor -%}
              {%- endif -%}
            </ul>
          </div>
        </div>
        <div class="w-100 npt-3 npb-3 d-none d-lg-block"><div class="npt-3 npb-3"><div class="npt-3 npb-3"><div class="npt-3 npb-3"></div></div></div></div>
        {% for link in linklists[section.settings.footer].links %}
          {% if link.levels == 1 and forloop.index >= 4 %}
            <div class="col-lg-6 col-xl-9 align-self-end">
              <div class="mb-0 border-bottom dot-border-dark border-lg-none">
                <p class="d-flex d-lg-none mb-0 justify-content-between align-items-center nav-title npt-3 npb-3"
                  data-bs-toggle="collapse" 
                  href="#footer-{{ link.title | handleize }}" role="button" aria-expanded="false" aria-controls="footer-{{ link.title | handleize }}">
                  <span class="font-ndot55 fs-base">{{ link.title }}</span>
                  <span class="nav-chevron-down">{% render 'icon-chevron-down' %}</span>
                </p>
                <!-- <span class="d-none d-lg-block font-ndot55 fs-base">{{ link.title }}</span> -->
                <ul class="list-unstyled mb-0 collapse d-lg-flex row" id="footer-{{ link.title | handleize }}">
                  {% for sublink in link.links %}
                    <li class="{% if forloop.last %}npb-3 {% endif %}d-flex npy-1 py-lg-0 col-lg-auto">
                      <a class="{% unless sublink.title == '&nbsp;' %}nlink-hover{% endunless %} text-dark break-word font-ndot55 fs-base"
                        {% if link.url contains 'https://' or link.url contains 'http://' %} target="_blank" rel="noopener"{% endif %}
                        href="{{ sublink.url }}">{{ sublink.title }}</a>
                    </li>
                  {% endfor %}
                </ul>
              </div>
            </div>
          {% endif %}
        {% endfor %}
        <div class="col-lg-6 col-xl-3 align-self-end d-none d-lg-block">
          <p class="mb-0 npt-3 text-dark font-ndot55 fs-base payment-info">{{ section.settings.payment_info }}</p>
        </div>
      </div>
    </div>
    <div class="col-md-5 col-lg-4 col-xl-3 d-flex flex-column">
      <div class="flex-grow-1">
        {%- assign formId = 'Contact_' | append: section.id -%}
        <form method="post" 
          action="{{ settings.subscribe_api }}" 
          accept-charset="UTF-8" 
          enctype="multipart/form-data"
          class="needs-validation as-newsletter-form as-track-subscribe newsletter-form inactive"
          data-type="footer"
          novalidate="true" 
          autocomplete="off">
          {% comment %} <!-- 使用google-recaptcha后，生成包含<textarea name="g-recaptcha-response"></textarea>的结构（内含token值） --> {% endcomment %}
          <google-recaptcha data-sitekey="{{ settings.google_recaptcha_sitekey }}" data-container-class="as-verify-code-recaptcha"></google-recaptcha>
          <div>
            {% if settings.store_tag != blank %}
            <input type="hidden" name="tags" value="{{settings.store_tag}}">
            {% endif %}
            <label class="font-ndot55 fs-base d-none d-lg-block" for="{{ formId }}-email">{{ 'general.newsletter_form.newsletter_email' | t }}</label>
            <div class="nmt-3 footer-input-wrap position-relative">
              <div class="input-group input-group-overlay fs-base">
                <span class="font-ndot55 d-flex align-items-center">[&nbsp;&nbsp;</span>
                <input class="as-form-input bg-transparent form-control p-0 border-0 font-ndot55 fs-base text-uppercase placeholder-dark text-dark"
                  type="email" name="email" id="{{ formId }}-email" 
                  value="{{ form.email }}" placeholder="{{ 'general.newsletter_form.email_placeholder' | t }}" 
                  pattern='^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$'
                  style="height: auto;" required>
                <button class="footer-btn p-0 bg-transparent border-0 font-ndot55 fs-base text-dark">{{ 'general.newsletter_form.submit' | t }}</button>
                <span class="font-ndot55 d-flex align-items-center">&nbsp;&nbsp;]</span>
              </div>
              <div class="text-start px-0 font-ndot55 fs-base text-uppercase text-danger invalid-feedback as-error-tips">
                {{ 'general.newsletter_form.email_placeholder' | t }}{{ 'general.error_message.format_error' | t }}
              </div>
              <div class="position-absolute start-0 top-0 as-placeholder-click placeholder-click font-ndot55 fs-base cursor-pointer">[&nbsp;&nbsp;{{ 'general.newsletter_form.email_placeholder' | t }}&nbsp;&nbsp;]</div>
            </div>
            <div class="footer-checkbox">
              <div class="form-check nmt-3 ps-input">
                <div class="form-check-input bg-transparent border-0 w-auto h-auto mw-100 mt-0 ms-input fs-base">
                  <span class="font-ndot55 float-start">[</span>
                  <input class="as-form-input-pre as-footer-privacy bg-transparent form-check-input font-ndot55 border-0 rounded-0 mw-100 mh-100 m-0" type="checkbox" id="read_policy" required />
                  <span class="font-ndot55 float-start">]</span>
                </div>
                {%- capture policy -%}
                  <a href="{{ routes.root_url }}pages/privacy-policy" class="text-decoration-underline text-dark">{{ 'general.newsletter_form.policy' | t }}</a>
                {%- endcapture -%}
                <label for="read_policy" class="font-ndot55 fs-base text-uppercase">{{ 'general.newsletter_form.read_policy_html' | t: policy: policy }}</label>
                <div class="text-start px-0 font-ndot55 fs-base text-uppercase text-danger invalid-feedback as-error-tips as-footer-privasy-error">
                  {{ 'general.newsletter_form.accept' | t }}
                </div>
              </div>
            </div>
            <div class="footer-checkbox">
              <div class="form-check nmt-3 ps-input">
                <div class="form-check-input bg-transparent border-0 w-auto h-auto mw-100 mt-0 ms-input fs-base">
                  <span class="font-ndot55 float-start">[</span>
                  <input class="bg-transparent form-check-input font-ndot55 border-0 rounded-0 mw-100 mh-100 m-0" type="checkbox" id="receiving_communication" />
                  <span class="font-ndot55 float-start">]</span>
                </div>
                <label for="receiving_communication" class="font-ndot55 fs-base text-uppercase">{{ 'general.newsletter_form.receiving_communication' | t }}</label>
              </div>
              <div class="text-start px-0 font-ndot55 fs-base text-uppercase text-danger invalid-feedback as-error-tips">
              </div>
            </div>
            
          </div>
          <div class="as-tips-success d-none text-primary font-ndot55 fs-base text-uppercase mt-3">{{ 'general.newsletter_form.post_success' | t }}</div>
      
          <div data-default="{{ 'general.newsletter_form.post_error' | t }}{{ 'general.error_message.format_error' | t }}" data-error406="{{ 'general.newsletter_form.distributor_error' | t }}" class="as-tips-error d-none text-danger font-ndot55 fs-base text-uppercase mt-3">{{ 'general.newsletter_form.post_error' | t }}{{ 'general.error_message.format_error' | t }}</div>
      
        </form>
      </div>
      <div class="text-uppercase d-flex justify-content-lg-end nmt-3 npt-3">
        <span class="font-ndot55 fs-base d-block d-lg-none">{{ 'general.country.footer.title' | t }}<span class="d-inline-block">:&nbsp;</span></span>
        <a class="font-ndot55 fs-base text-dark text-decoration-underline as-current-country cursor-pointer text-uppercase-real" data-bs-toggle="modal" data-bs-target="#as-country-popup">&nbsp;</a>
      </div>
      <div class="d-block d-lg-none">
        <p class="mb-0 npt-3 text-dark break-word font-ndot55 fs-base">{{ section.settings.payment_info }}</p>
      </div>
    </div>
  </div>
  {% assign enable_address = false %}
  {% for block in section.blocks %}
    {% if block.type == 'Address_info' %}
      {% assign enable_address = true %}
    {% endif %}
  {% endfor %}
  {% if enable_address %}
  <div class="overflow-hidden">
    <p class="mb-0 npt-3 text-dark break-word font-ndot55 fs-base d-flex flex-column d-sm-block">
    {% for block in section.blocks %}
      {% if block.type == 'Address_info' %}
        <span>{{ block.settings.title }}</span>
      {% endif %}
    {% endfor %}
    </p>
  </div>
  {% endif %}
</div>

{% schema %}
{
  "name": "Footer",
  "tag": "footer",
  "class": "nfooter nbg-primary footer-site as-footer-site as-snap-list position-relative z-index-2",
  "settings": [
    {
      "type": "link_list",
      "label": "Footer Menu",
      "id": "footer",
      "default": "footer"
    },
    {
      "type": "text",
      "id": "social_title",
      "label": "Social Title",
      "default": "social"
    },
    {
      "type": "text",
      "id": "payment_info",
      "label": "Payment Info",
      "default": "ALL MAJOR CREDIT CARDS AND CRYPTO ACCEPTED"
    }
  ],
  "blocks": [
    {
      "name": "Bitcoin",
      "type": "bitcoin",
      "settings": [
        {
          "type": "image_picker",
          "id": "image",
          "label": "Bitcoin image for desktop",
          "info": "Image size only 24px x 24px"
        },
        {
          "type": "image_picker",
          "id": "image_mobile",
          "label": "Bitcoin image for mobile",
          "info": "Image size only 24px x 24px"
        }
      ]
    },
    {
      "name": "Payment image",
      "type": "payment_image",
      "settings": [
        {
          "type": "image_picker",
          "id": "image",
          "label": "Payment image for desktop",
          "info": "Image size only 38px x 24px"
        },
        {
          "type": "image_picker",
          "id": "image_mobile",
          "label": "Payment image for mobile",
          "info": "Image size only 38px x 24px"
        }
      ]
    },
    {
      "name": "Address info",
      "type": "Address_info",
      "settings": [
        {
          "type": "text",
          "id": "title",
          "label": "address Info"
        }
      ]
    }
  ]
}
{% endschema %}
